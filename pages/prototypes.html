<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ECOLUD – Prototypes</title>
    <link rel="stylesheet" href="../assets/css/style.css" />
    <link rel="stylesheet" href="../assets/css/game.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      .page-prototypes main {
        padding-top: 88px;
        display: grid;
        gap: 1.3rem;
      }
      .page-prototypes .prototypes-hero {
        padding: 1rem 6vw 0;
        display: grid;
        gap: 1.4rem;
        text-align: center;
      }
      .page-prototypes .hero-heading {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: clamp(1rem, 3vw, 1.6rem);
        flex-wrap: wrap;
      }
      .page-prototypes .association-logo {
        width: clamp(120px, 18vw, 160px);
        margin: 0;
      }
      .page-prototypes .association-logo img {
        width: 100%;
        height: auto;
        display: block;
      }
      .page-prototypes .prototypes-hero p {
        margin: 0 auto;
        max-width: 640px;
        color: var(--text-muted);
        line-height: 1.7;
      }
      .page-prototypes .prototype-grid {
        padding: 0 6vw;
        display: grid;
        gap: 2rem;
      }
      .page-prototypes .prototype-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: clamp(1.6rem, 3vw, 2.4rem);
      }
      .page-prototypes .prototype-card {
        display: grid;
        gap: 1.1rem;
        text-decoration: none;
        color: inherit;
      }
      .page-prototypes .prototype-card img {
        width: 100%;
        border-radius: var(--radius-md);
        aspect-ratio: 2 / 3;
        max-height: 420px;
        margin: 0 auto;
        object-fit: contain;
        object-position: center;
        background: rgba(255, 255, 255, 0.6);
      }
      .page-prototypes .prototype-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.9rem;
        color: var(--text-muted);
      }
      .page-prototypes .prototype-card h3 {
        margin: 0;
        color: var(--primary-dark);
      }
      .page-prototypes .prototype-actions {
        padding: 0 6vw 4rem;
        display: grid;
        justify-items: center;
      }
      .page-prototypes .prototype-actions .btn {
        width: fit-content;
      }
    </style>
  </head>
  <body class="page-prototypes">
    <header class="site-header" id="siteHeader">
      <a href="../index.html" class="site-logo" aria-label="ECOLUD accueil">
        <img src="../assets/images/logo/ecolud.png" alt="ECOLUD" />
      </a>
      <nav class="site-nav" aria-label="Navigation principale">
        <a href="../index.html#top" data-i18n="nav-home">Accueil</a>
        <a href="../index.html#shop" data-i18n="nav-shop">Boutique</a>
        <a href="game.html" data-i18n="nav-play">Jouer</a>
        <!-- <a href="../index.html#experience" data-i18n="nav-experience">Expérience</a> -->
        <a href="login.html" class="active" data-i18n="nav-partner" id="navPartnerLink">Partenaire</a>
        <a href="contact.html" data-i18n="nav-contact">Contact</a>
      </nav>
      <div class="header-actions">
        <div class="nav-session" id="navSession">
          <div class="player-badge user-info hidden" id="navPlayerBadge" aria-live="polite">
            <img id="navPlayerAvatar" src="" alt="Avatar du joueur" />
            <span id="navPlayerName"></span>
          </div>
          <button
            type="button"
            class="btn btn-ghost nav-change hidden"
            id="navChangeProfile"
            data-change-profile
            data-profile-target="pages/choose.html"
            data-profile-mode="reset"
            data-i18n="change-profile"
          >
            Changer de profil
          </button>
        </div>
        <div class="partner-actions hidden" id="partnerActions">
          <a href="prototypes.html" class="btn btn-ghost" id="partnerSpaceLink" data-i18n="partner-space">
            Mon espace
          </a>
          <button type="button" class="btn btn-ghost" id="partnerLogoutBtn" data-i18n="partner-logout">
            Déconnexion
          </button>
        </div>
        <div class="lang-toggle" role="group" aria-label="Changer de langue">
          <button type="button" class="active" data-lang-btn data-lang="fr">FR</button>
          <button type="button" data-lang-btn data-lang="en">EN</button>
          <button type="button" data-lang-btn data-lang="es">ES</button>
        </div>
      </div>
    </header>

    <main data-i18n-container>
      <section class="prototypes-hero">
        <div class="hero-heading">
          <div class="association-logo">
            <img src="../assets/images/logo/logo_association.png" alt="Logo de l'association Graine de Planète" />
          </div>
          <h1>Graine de Planète</h1>
        </div>
        <p id="partnerWelcome">
          Voici nos propositions de prototype pour l'association Graine de Planète
        </p>
      </section>
      <section class="prototype-grid">
        <h2>Prototypes de test</h2>
        <div class="prototype-list">
          <a class="product-card glass-card prototype-card" href="puzzle-a.html" data-proto="puzzle-a">
            <img src="../assets/images/puzzles/Français.png" alt="Illustration puzzle Protège les océans" />
            <div>
              <h3>Protège les océans</h3>
              <p class="product-description">
                Assemble le récif magnétique et découvre les espèces qui s’y cachent.
              </p>
            </div>
            <div class="prototype-meta">
              <span>Version 0.9</span>
              <span>Novembre 2025</span>
            </div>
          </a>
          <a class="product-card glass-card prototype-card" href="puzzle-b.html" data-proto="puzzle-b">
            <img src="../assets/images/puzzles/protect_the_oceans.png" alt="Protect the Oceans puzzle cover" />
            <div>
              <h3>Protect the Oceans</h3>
              <p class="product-description">
                Rebuild the magnetic reef and reveal the marine life hidden within every tile.
              </p>
            </div>
            <div class="prototype-meta">
              <span>Version 0.7</span>
              <span>Novembre 2025</span>
            </div>
          </a>
          <a class="product-card glass-card prototype-card" href="puzzle-c.html" data-proto="puzzle-c">
            <img src="../assets/images/puzzles/Espagnol.png" alt="Arte del rompecabezas Protege los océanos" />
            <div>
              <h3>Protege los océanos</h3>
              <p class="product-description">
                Reconstruye el arrecife magnético y descubre las especies que se esconden en cada módulo.
              </p>
            </div>
            <div class="prototype-meta">
              <span>Version 0.6</span>
              <span>Novembre 2025</span>
            </div>
          </a>
        </div>
        <p class="section-intro hidden" id="noPrototypesNotice" data-i18n="partner-empty">
          Aucun prototype n’est disponible pour votre compte pour le moment.
        </p>
      </section>

      <!--
      <section class="prototype-actions">
        <a class="btn btn-secondary" href="partenariat.html">Devenir partenaire test</a>
      </section>
      -->
    </main>

    <footer class="page-footer">
      <span>&copy; 2025 ECOLUD – Prototype éducatif écologique</span>
      <div class="footer-links">
        <a href="../index.html#missions" data-i18n="footer-missions">Voir les missions</a>
        <a href="#" data-privacy-trigger data-i18n="footer-privacy">Politique de confidentialité</a>
      </div>
    </footer>

    <div id="floating-avatar" class="hidden" aria-hidden="true">
      <img id="avatarCompanion" src="../assets/images/avatars/turtle.png" alt="Mascotte flottante" />
    </div>

    <div class="privacy-modal modal" id="privacy-modal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal-content" role="document">
        <button type="button" id="close-privacy" aria-label="Fermer">&times;</button>
        <h1>Politique de confidentialité</h1>
        <p><strong>Dernière mise à jour&nbsp;:</strong> 20 octobre 2025</p>

        <h2>1. Responsable du traitement</h2>
        <p>
          <strong>ECOLUD</strong>, prototype éducatif écologique, joignable à
          <a href="mailto:contact@ecolud.org">contact@ecolud.org</a>.
        </p>

        <h2>2. Données collectées</h2>
        <ul>
          <li>Nom, prénom et avatar sélectionné par le joueur.</li>
          <li>Adresse e-mail en cas de contact ou d’inscription.</li>
          <li>Données d’interaction&nbsp;: progression, préférences de langue, messages via le formulaire.</li>
        </ul>

        <h2>3. Finalités du traitement</h2>
        <ul>
          <li>Fournir une expérience ludique et éducative autour de l’écologie.</li>
          <li>Gérer les missions collaboratives, classements et statistiques.</li>
          <li>Répondre aux demandes de contact et assurer le suivi pédagogique.</li>
          <li>Améliorer le contenu et l’ergonomie du site.</li>
        </ul>

        <h2>4. Bases légales</h2>
        <p>
          Les traitements reposent sur le consentement de l'utilisateur, l’exécution d'une mission d’intérêt
          éducatif et le respect d'obligations légales.
        </p>

        <h2>5. Destinataires et transferts</h2>
        <p>
          Les données sont hébergées en Union européenne. Aucune transmission commerciale n'est réalisée.
          Des prestataires techniques agréés peuvent y accéder pour la maintenance du service.
        </p>

        <h2>6. Durée de conservation</h2>
        <p>
          Les données sont conservées uniquement pendant la durée de l’inscription active ou des missions
          éducatives en cours.
        </p>

        <h2>7. Droits de l’utilisateur</h2>
        <p>
          L’utilisateur peut à tout moment demander la suppression ou la rectification de ses données via l’adresse
          <a href="mailto:contact@ecolud.org">contact@ecolud.org</a>.
        </p>

        <h2>8. Sécurité</h2>
        <p>Les données sont protégées par chiffrement SSL et sauvegardes sécurisées.</p>

        <h2>9. Contact</h2>
        <p>
          Pour toute question relative à cette politique&nbsp;:
          <a href="mailto:contact@ecolud.org">contact@ecolud.org</a>
        </p>
      </div>
    </div>

    <script src="../assets/js/auth.js" defer></script>
    <script src="../assets/js/app.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const account = window.auth && typeof window.auth.getAccount === 'function' ? window.auth.getAccount() : null;
        if (!account) {
          window.location.href = 'login.html';
          return;
        }
        const allowed = Array.isArray(account.prototypes) ? account.prototypes : [];
        const cards = document.querySelectorAll('[data-proto]');
        let visibleCount = 0;
        cards.forEach((card) => {
          if (allowed.includes(card.getAttribute('data-proto'))) {
            card.style.display = '';
            visibleCount += 1;
          } else {
            card.style.display = 'none';
          }
        });

        const emptyNotice = document.getElementById('noPrototypesNotice');
        if (emptyNotice) {
          emptyNotice.classList.toggle('hidden', visibleCount > 0);
        }
      });
    </script>
  </body>
</html>
